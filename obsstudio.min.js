!function(){function e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var t=window.obsstudio||{},n=(t.onVisibilityChange,t.getCurrentScene,{}),r={},i=null,o=null,a=null,s=!1;Object.defineProperty(t,"extensionVersion",{writable:!1,enumerable:!0,value:"0.0.3"}),Object.defineProperty(t,"STATE",{writable:!1,enumerable:!0,value:Object.freeze({INACTIVE:0,STARTING:1,STARTED:2,STOPPING:3})}),Object.defineProperty(t,"STATE",{writable:!1,enumerable:!0,value:Object.freeze({0:"INACTIVE",1:"STARTING",2:"STARTED",3:"STOPPING"})}),Object.defineProperty(t,"on",{writable:!1,enumerable:!0,value:function(r,i,o){if("string"!=typeof r||!r)throw Error("Invalid event name");if("function"!=typeof i||!i)throw Error("Invalid event handling function");if(void 0!==o&&"boolean"!=typeof o)throw Error("Invalid once parameter");if("ready"===r){if(s)return setTimeout(i,0),t;o=!0}return e(n,r)||(n[r]=[]),n[r].push({callback:i,once:o}),t}}),Object.defineProperty(t,"off",{writable:!1,enumerable:!0,value:function(r,i,o){if("string"!=typeof r||!r)throw Error("Invalid event name");if("function"!=typeof i||!i)throw Error("Invalid event handling function");if(void 0!==o&&"boolean"!=typeof o)throw Error("Invalid once parameter");if(e(n,r)&&Array.isArray(n[r])&&n[r].length){for(var a=0,s=n[r];a<s.length;){if(s[a].callback===i&&s[a].once===o){s.splice(a,1);break}a+=1}0===s.length&&delete n[r]}else delete n[r];return t}}),Object.defineProperty(t,"once",{writable:!1,enumerable:!0,value:function(e,n){return t.on(e,n,!0)}}),Object.defineProperty(t,"onceOff",{writable:!1,enumerable:!0,value:function(e,n){return t.off(e,n,!0)}}),Object.defineProperty(t,"emit",{writable:!1,enumerable:!0,value:function(r,i){if("string"!=typeof r||!r)throw Error("Invalid event name");if(e(n,r)&&Array.isArray(n[r])&&n[r].length){for(var o=n[r],a=0,s=[];a<o.length;)s.push(o[a].callback),o[a].once?o.splice(a,1):a+=1;o.length||delete n[r],s.length&&setTimeout(function c(){var e=s.shift();s.length&&setTimeout(c,0),e.call(t,void 0!==i?JSON.parse(JSON.stringify(i)):void 0)},0)}else delete n[r];return t}}),Object.defineProperty(t,"currentScene",{writable:!1,enumerable:!0,value:function(){if(s)return JSON.parse(JSON.stringify(r||"{}"));throw Error("OBS-Studio BrowerSource Extension not ready")}}),Object.defineProperty(t,"isVisible",{writable:!1,enumerable:!0,value:function(){if(s)return i;throw Error("OBS-Studio BrowerSource Extension not ready")}}),Object.defineProperty(t,"streamState",{writable:!1,enumerable:!0,value:function(){if(s)return o;throw Error("OBS-Studio BrowerSource Extension not ready")}}),Object.defineProperty(t,"recordState",{writable:!1,enumerable:!0,value:function(){if(s)return a;throw Error("OBS-Studio BrowerSource Extension not ready")}}),Object.defineProperty(t,"isReady",{writable:!1,enumerable:!0,value:function(){return s}}),window.obsstudio?(Object.defineProperty(t,"pluginVersion",{writable:!1,enumerable:!0,value:t.pluginVersion}),Object.defineProperty(t,"getCurrentScene",{writable:!1,enumerable:!0,value:t.getCurrentScene}),"function"==typeof t.onVisibilityChange&&t.on("visbilityChange",t.onVisibilityChange),Object.defineProperty(t,"onVisibilityChange",{writable:!1,enumerable:!0,set:function(e){return"function"==typeof e&&t.on("visibilityChange",e),t},value:function(e){i=e,t.emit("visibilityChange",e)}}),window.addEventListener("obsStreamingStarting",function(){o=t.STATE.STARTING,t.emit("streamState",o)}),window.addEventListener("obsStreamingStarted",function(){o=t.STATE.STARTED,t.emit("streamState",o)}),window.addEventListener("obsStreamingStopping",function(){o=t.STATE.STOPPING,t.emit("streamState",o)}),window.addEventListener("obsStreamingStopped",function(){o=t.STATE.INACTIVE,t.emit("streamState",o)}),window.addEventListener("obsRecordingStarting",function(){a=t.STATE.STARTING,t.emit("recordState",o)}),window.addEventListener("obsRecordingStarted",function(){a=t.STATE.STARTED,t.emit("recordState",o)}),window.addEventListener("obsRecordingStopping",function(){a=t.STATE.STOPPING,t.emit("recordState",o)}),window.addEventListener("obsRecordingStopped",function(){a=t.STATE.INACTIVE,t.emit("recordState",o)}),window.addEventListener("obsSceneChanged",function(e){e.detail.previousScene=r,r=e.detail,s?t.emit("sceneChange",e.detail):t.emit("ready")}),t.getCurrentScene(function(e){e=JSON.parse(e),s||(s=!0,r=e,t.emit("ready"))})):!function(){function n(){var t,n,r,i=location.hash.substring(1),o=/(?:^|&)([^&=]+)(?:=([^&]*))?(?=&|$)/g,a={};if(i)for(;t=o.exec(i);)n=decodeURIComponent(t[1]),r=decodeURIComponent(t[2]),e(a,n)?Array.isArray(a[n])?a[n].push(r):a.name=[a[n],r]:a[n]=r;return a}function c(){var c,d=n();if(!e(d,"event")||"string"!=typeof d.event||!d.event)throw Error("location.hash missing or has invalid event parameter");if("init"!==d.event&&!s)throw Error("init event not called");switch(d.event.toLowerCase()){case"init":if(s)throw Error("init event already raised");if(!e(d,"scene")||"string"!=typeof d.scene||!d.scene.length)throw Error("init event missing scene");if(!e(d,"width")||"string"!=typeof d.width||!d.width.length||isNaN(d.width))throw Error("init event missing scene");if(!e(d,"height")||"string"!=typeof d.height||!d.height.length||isNaN(d.height))throw Error("init event missing scene");r={name:d.scene,width:+d.width,height:+d.height},s=!0,t.emit("ready");break;case"scenechange":if(!e(d,"scene")||"string"!=typeof d.scene||!d.scene.length)throw Error("init event missing scene");if(!e(d,"width")||"string"!=typeof d.width||!d.width.length||isNaN(d.width))throw Error("init event missing scene");if(!e(d,"height")||"string"!=typeof d.height||!d.height.length||isNaN(d.height))throw Error("init event missing scene");c={name:d.scene,width:+d.width,height:+d.height,previousScene:r},r={name:d.scene,width:+d.width,height:+d.height},t.emit("sceneChange",c);break;case"visibilitychange":if(!e(d,"state")||"string"!=typeof d.state)throw Error("visibilityChange event missing state parameter");d.state=d.state.toLowerCase(),"true"===d.state?d.state=!0:"false"===d.state?d.state=!1:isNaN(d.state)||(d.state=+d.state),i===!d.state&&(i=!!d.state,t.emit(visibilityChange));break;case"streamstate":if(!e(d,"state")||"string"!=typeof d.state||!e(t.STATEBYINDEX,d.state))throw Error("streamState event has missing or invalid state parameter");o!==t.STATEBYINDEX[d.state]&&(o=t.STATEBYINDEX[d.state],t.emit("streamState",o));break;case"recordstate":if(!e(d,"state")||"string"!=typeof d.state||!e(t.STATEBYINDEX,d.state))throw Error("recordState event has missing or invalid state parameter");a!==t.STATEBYINDEX[d.state]&&(a=t.STATEBYINDEX[d.state],t.emit("recordState",a));break;default:throw Error("unknown event")}}window.addEventListener("hashchange",c()||c)}(),window.obsstudio=t}();
